{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Geo-Portal - {{ title }}</title>
    <meta
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
            name="viewport"
    />
    <link
            rel="icon"
            href="{% static 'assets/img/kaiadmin/favicon.ico' %}"
            type="image/x-icon"
    />

    <!-- Fonts and icons -->
    <script src="{% static 'assets/js/plugin/webfont/webfont.min.js' %}"></script>
    <script>
        WebFont.load({
            google: {families: ["Public Sans:300,400,500,600,700"]},
            custom: {
                families: [
                    "Font Awesome 5 Solid",
                    "Font Awesome 5 Regular",
                    "Font Awesome 5 Brands",
                    "simple-line-icons",
                ],
                urls: ["{% static 'assets/css/fonts.min.css' %}"],
            },
            active: function () {
                sessionStorage.fonts = true;
            },
        });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/plugins.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/kaiadmin.min.css' %}"/>

    <!-- También puedes incluir estilos personalizados para el mapa si es necesario -->
    <style>
        #map {
            height: 400px; /* Establece el alto deseado para el mapa */
        }

        .dj_map_wrapper {
            height: 500px;
        }
    </style>
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}"/>
    <style>
        /* Spinner styles */
        .spinner-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000; /* Make sure it is above other content */
        }

        .spinner {
            border: 8px solid rgba(0, 0, 0, 0.1); /* Light border */
            border-radius: 50%;
            border-top: 8px solid #007bff; /* Color of the spinner */
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        .custom-clear-map-control {
            top: 3.75rem; /* Posicionar debajo de los controles de zoom */
            left: 0.5rem;
            position: absolute;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>

    <!-- Include Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="{% static 'v6.15.0-dist/ol.css' %}">

    <!-- Include SweetAlert and Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% block heading_extra %}
    {% endblock %}
</head>
<body>
<div class="spinner-wrapper" id="spinner">
    <div class="spinner"></div>
</div>
<div class="wrapper sidebar_minimize">
    <!-- Sidebar -->
    <div class="sidebar" data-background-color="dark">
        <div class="sidebar-logo">
            <!-- Logo Header -->
            <div class="logo-header" data-background-color="dark">
                <a href="/" class="logo">
                    <img
                            src="{% static 'assets/img/kaiadmin/logo_light.svg' %}"
                            alt="navbar brand"
                            class="navbar-brand"
                            height="20"
                    />
                </a>
                <div class="nav-toggle">
                    <button class="btn btn-toggle toggle-sidebar">
                        <i class="gg-menu-right"></i>
                    </button>
                    <button class="btn btn-toggle sidenav-toggler">
                        <i class="gg-menu-left"></i>
                    </button>
                </div>
                <button class="topbar-toggler more">
                    <i class="gg-more-vertical-alt"></i>
                </button>
            </div>
            <!-- End Logo Header -->
        </div>
        <div class="scroll-wrapper sidebar-wrapper scrollbar scrollbar-inner">
            <div class="sidebar-content">
                <ul class="nav nav-secondary">
                    <li class="nav-item active">
                        <a
                                href="/"
                                class="collapsed"
                                aria-expanded="false"
                        >
                            <i class="fas fa-home"></i>
                            <p>Dashboard</p>
                            <span class="caret"></span>
                        </a>
                    </li>
                    <li class="nav-section">
                        <span class="sidebar-mini-icon">
                          <i class="fa fa-ellipsis-h"></i>
                        </span>
                        <h4 class="text-section">Administrative</h4>
                    </li>
                    <li class="nav-item">
                        <a data-bs-toggle="collapse" href="#base">
                            <i class="fas fa-layer-group"></i>
                            <p>Base</p>
                            <span class="caret"></span>
                        </a>
                        <div class="collapse" id="base">
                            <ul class="nav nav-collapse">
                                <li>
                                    <a href="{% url 'category-list' %}">
                                        <span class="sub-item">Categories</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'subcategory-list' %}">
                                        <span class="sub-item">Sub-Categories</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'indicator-list' %}">
                                        <span class="sub-item">Indicators</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'source-type-list' %}">
                                        <span class="sub-item">Source types</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'sector_type_list' %}">
                                        <span class="sub-item">Sector types</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'sector_list' %}">
                                        <span class="sub-item">Sectors</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a data-bs-toggle="collapse" href="#settings">
                            <i class="fas fa-layer-group"></i>
                            <p>Settings</p>
                            <span class="caret"></span>
                        </a>
                        <div class="collapse" id="settings">
                            <ul class="nav nav-collapse">
                                <li>
                                    <a href="{% url 'indicator-template-list' %}">
                                        <span class="sub-item">Setting template</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a data-bs-toggle="collapse" href="#record_indicator">
                            <i class="fas fa-layer-group"></i>
                            <p>Record Information</p>
                            <span class="caret"></span>
                        </a>
                        <div class="collapse" id="record_indicator">
                            <ul class="nav nav-collapse">
                                <li>
                                    <a href="{% url 'indicator-record-list' %}">
                                        <span class="sub-item">Indicators</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End Sidebar -->

    <div class="main-panel">
        <div class="main-header">
            <div class="main-header-logo">
                <!-- Logo Header -->
                <div class="logo-header" data-background-color="dark">
                    <a href="{{ request.path }}" class="logo">
                        <img
                                src="{% static 'assets/img/kaiadmin/logo_light.svg' %}"
                                alt="navbar brand"
                                class="navbar-brand"
                                height="20"
                        />
                    </a>
                    <div class="nav-toggle">
                        <button class="btn btn-toggle toggle-sidebar">
                            <i class="gg-menu-right"></i>
                        </button>
                        <button class="btn btn-toggle sidenav-toggler">
                            <i class="gg-menu-left"></i>
                        </button>
                    </div>
                    <button class="topbar-toggler more">
                        <i class="gg-more-vertical-alt"></i>
                    </button>
                </div>
                <!-- End Logo Header -->
            </div>
            <!-- Navbar Header -->
            <nav
                    class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom"
            >
                <div class="container-fluid">

                    <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
                        <li class="nav-item topbar-user dropdown hidden-caret">
                            <a
                                    class="dropdown-toggle profile-pic"
                                    data-bs-toggle="dropdown"
                                    href="#"
                                    aria-expanded="false"
                            >
                                <div class="avatar-sm">
                                    <img
                                            src="{% static 'assets/img/profile.jpg' %}"
                                            alt="..."
                                            class="avatar-img rounded-circle"
                                    />
                                </div>
                                <span class="profile-username">
                      <span class="op-7">Hi,</span>
                      <span class="fw-bold">{% if request.person %}{{ request.person.short_name }}{% else %}
                          {{ person.short_name }}{% endif %}</span>
                    </span>
                            </a>
                            <ul class="dropdown-menu dropdown-user animated fadeIn">
                                <div class="dropdown-user-scroll scrollbar-outer">
                                    <li>
                                        <div class="user-box">
                                            {#                                            <div class="avatar-sm">#}
                                            {#                                                <img#}
                                            {#                                                        src="{% static 'assets/img/profile.jpg' %}"#}
                                            {#                                                        alt="image profile"#}
                                            {#                                                        class="avatar-img rounded"#}
                                            {#                                                />#}
                                            {#                                            </div>#}
                                            {#                                            <div class="u-text">#}
                                            {#                                                <h4>Hizrian</h4>#}
                                            {#                                                <p class="text-muted">hello@example.com</p>#}
                                            {#                                                <a#}
                                            {#                                                        href="profile.html"#}
                                            {#                                                        class="btn btn-xs btn-secondary btn-sm"#}
                                            {#                                                >View Profile</a#}
                                            {#                                                >#}
                                            {#                                            </div>#}
                                        </div>
                                    </li>
                                    <li>
                                        {% if request.user.is_superuser %}
                                            <a class="dropdown-item" target="_blank" href="/admin_django">Django
                                                Admin</a>
                                            <div class="dropdown-divider"></div>
                                        {% endif %}
                                        {#                                        <a class="dropdown-item" href="#">My Profile</a>#}
                                        {#                                        <a class="dropdown-item" href="#">My Balance</a>#}
                                        {#                                        <a class="dropdown-item" href="#">Inbox</a>#}
                                        {#                                        <div class="dropdown-divider"></div>#}
                                        {#                                        <a class="dropdown-item" href="#">Account Setting</a>#}
                                        {#                                        <div class="dropdown-divider"></div>#}
                                        <a class="dropdown-item" href="{% url 'logoutper' %}">Logout</a>
                                    </li>
                                </div>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- End Navbar -->
        </div>

        <div class="container">
            <div class="page-inner">
                <div class="page-header">
                    <h4 class="page-title">{{ title }}</h4>
                    <ul class="breadcrumbs">
                        <li class="nav-home">
                            <a href="#">
                                <i class="icon-home"></i>
                            </a>
                        </li>
                        {% block breadcrumbs %}
                            {#                        <li class="separator">#}
                            {#                            <i class="icon-arrow-right"></i>#}
                            {#                        </li>#}
                            {#                        <li class="nav-item">#}
                            {#                            <a href="#">Pages</a>#}
                            {#                        </li>#}
                            {#                        <li class="separator">#}
                            {#                            <i class="icon-arrow-right"></i>#}
                            {#                        </li>#}
                            {#                        <li class="nav-item">#}
                            {#                            <a href="#">Starter Page</a>#}
                            {#                        </li>#}
                        {% endblock %}
                    </ul>
                </div>
                <div class="page-category">
                    {% block main %}
                    {% endblock %}
                </div>
            </div>
        </div>

        <footer class="footer">
            <!-- <div class="container-fluid d-flex justify-content-between">
                 <nav class="pull-left">
                     <ul class="nav">
                         <li class="nav-item">
                             <a class="nav-link" href="http://www.themekita.com">
                                 ThemeKita
                             </a>
                         </li>
                         <li class="nav-item">
                             <a class="nav-link" href="#"> Help </a>
                         </li>
                         <li class="nav-item">
                             <a class="nav-link" href="#"> Licenses </a>
                         </li>
                     </ul>
                 </nav>
                 <div class="copyright">
                     2024, made with <i class="fa fa-heart heart text-danger"></i> by
                     <a href="http://www.themekita.com">ThemeKita</a>
                 </div>
                 <div>
                     Distributed by
                     <a target="_blank" href="https://themewagon.com/">ThemeWagon</a>.
                 </div>
         </div> -->
        </footer>
    </div>
</div>
<!--   Core JS Files   -->
<script src="{% static 'assets/js/core/jquery-3.7.1.min.js' %}"></script>
<script src="{% static 'assets/js/core/popper.min.js' %}"></script>
<script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>

<!-- jQuery Scrollbar -->
<script src="{% static 'assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>

<!-- Chart JS -->
<script src="{% static 'assets/js/plugin/chart.js/chart.min.js' %}"></script>

<!-- jQuery Sparkline -->
<script src="{% static 'assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>

<!-- Chart Circle -->
<script src="{% static 'assets/js/plugin/chart-circle/circles.min.js' %}"></script>

<!-- Datatables -->
<script src="{% static 'assets/js/plugin/datatables/datatables.min.js' %}"></script>

<!-- Bootstrap Notify -->
<script src="{% static 'assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>

<!-- jQuery Vector Maps -->
<script src="{% static 'assets/js/plugin/jsvectormap/jsvectormap.min.js' %}"></script>
<script src="{% static 'assets/js/plugin/jsvectormap/world.js' %}"></script>

<!-- Google Maps Plugin -->
<script src="{% static 'assets/js/plugin/gmaps/gmaps.js' %}"></script>

<!-- Sweet Alert -->
<script src="{% static 'assets/js/plugin/sweetalert/sweetalert.min.js' %}"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- Kaiadmin JS -->
<script src="{% static 'assets/js/kaiadmin.min.js' %}"></script>
<script>
    $(document).ready(function () {
        var f = 1;  // Fijar a 1 para que el menú esté minimizado desde el inicio

        function toggleSidebar() {
            if (f === 1) {
                $(".wrapper").addClass("sidebar_minimize"); // Aseguramos que esté minimizado
                var _ = $(".sidebar-toggler"); // Suponiendo que _ es el botón o trigger del sidebar
                _.addClass("toggled");
                _.html('<i class="gg-more-vertical-alt"></i>');
                f = 1; // Mantener f como 1
            } else {
                $(".wrapper").removeClass("sidebar_minimize");
                _.removeClass("toggled");
                _.html('<i class="gg-menu-right"></i>');
                f = 0;
            }
            $(window).resize();
        }

        // Ejecutar la función para forzar que el menú esté minimizado al cargar
        toggleSidebar();

        // Si el usuario interactúa con el botón para cambiar el estado
        $(".sidebar-toggler").on('click', toggleSidebar);
    });
</script>
<!-- OpenLayers JS -->
{#<script src="https://cdn.jsdelivr.net/npm/ol@v10.1.0/dist/ol.js"></script>#}
<script src="{% static 'v6.15.0-dist/ol.js' %}"></script>
<!-- Custom JavaScript for showing/hiding the spinner -->
{% block js_extra %}
{% endblock %}
</body>
</html>
